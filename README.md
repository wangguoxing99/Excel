


# 企业数据处理工具箱 (Enterprise Data Processing Toolkit)

这是一个集成了 **Excel 智能拆分系统** 和 **进销项智能比对系统** 的综合数据处理平台。系统采用统一的门户入口，包含完善的身份验证、自动超时注销以及容器化部署支持。

---

## 🚀 核心功能

### 🛡️ 系统管理
* **统一门户**：单点登录，集中管理所有工具入口。
* **安全认证**：首次运行引导设置管理员账号，支持密码加密存储。
* **自动注销**：30分钟无操作自动注销登录，保障数据安全。
* **CLI 管理**：支持通过命令行后台重置管理员密码。

### ✂️ Excel 智能拆分工具 (Splitter)
* **智能算法**：支持随机权重拆分和整数均匀拆分（针对特定单位）。
* **多 Sheet 支持**：可读取并处理 Excel 中的任意工作表。
* **灵活配置**：自定义“数量”基准列，支持保留任意指定的辅助列。

### 📊 进销项智能比对工具 (Comparator)
* **自动比对**：上传进项和销项文件，自动计算数量与金额差异。
* **名称清洗**：自动去除名称中的干扰字符（如 `*` 号）。
* **灵活映射**：手动指定进销项文件中的对应列（名称、数量、金额）。
* **报表导出**：一键生成包含详细差异数据的 Excel 报告。

---

## 🛠️ 快速部署 (Docker)

### 1. 构建镜像
```bash
docker build -t data-tools .

# 启动并映射到本地 5000 端口
docker run -d -p 5000:5000 --name my-tools data-tools

📖 使用指南
1. 系统初始化
首次启动容器后，系统处于未配置状态，任何人无法直接登录。

打开浏览器访问 http://localhost:5000。

系统会自动检测并跳转到 初始化设置页 (/setup)。

设置您的 管理员用户名 和 密码。

设置完成后，系统将自动跳转至登录页。

2. 访问工具
登录成功后，您将进入统一门户页面，点击卡片即可使用对应功能：

门户主页：/

拆分工具：/tool/splitter

比对工具：/tool/compare

3. 文件处理说明
上传：所有上传的文件仅在处理过程中临时存储在容器内的 /app/uploads 目录。

下载：生成的 Excel 报告存储在 /app/results 目录，下载后建议及时清理或定期重启容器。

持久化：系统重启后，账号配置（auth.json）会保留，无需重新初始化，直接登录即可。

🔧 运维管理
1. 忘记密码 / 重置账户
如果您忘记了管理员密码，或者需要强制修改账户信息，无需重新部署或删除文件。请在服务器终端执行以下命令：
# 语法: docker exec -it <容器名> flask reset-user <新用户名> <新密码>

# 示例：将用户重置为 admin，密码重置为 123456
docker exec -it my-tools flask reset-user admin 123456

多用户管理
1. 添加新用户 (或修改现有用户密码)
docker exec -it my-tools flask add-user zhangsan 888888

2. 删除用户
docker exec -it my-tools flask del-user lisi

3. 查看所有用户列表
docker exec -it my-tools flask list-users
